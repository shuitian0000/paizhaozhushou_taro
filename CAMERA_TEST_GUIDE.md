# 拍照助手功能测试指南

## 测试环境
- **必须使用真机调试**（开发者工具中Camera组件不支持）
- 微信小程序环境
- 需要相机权限

## 测试步骤

### 1. 进入拍照助手页面
- 从首页点击"拍照助手"按钮
- 或从底部TabBar点击"拍照助手"

### 2. 等待相机初始化
- 页面加载后会自动初始化相机
- 约1秒后会显示Toast提示"相机已就绪"
- 可以看到Camera组件的实时预览画面

### 3. 开始实时评估
- 点击底部的"开始实时评估"按钮
- 系统会立即进行第一次拍照评估
- 然后每2秒自动拍照一次

### 4. 观察实时反馈
**应该看到**：
- 顶部显示"实时评估中... 已评估 X 次"
- 评估计数每2秒增加1
- 显示实时建议（如"构图：可调整主体"）
- 显示当前评分和各项得分

**不应该看到**：
- ❌ 弹出选择框
- ❌ 需要手动点击拍照
- ❌ 需要确认照片

### 5. 根据建议调整
- 根据实时建议调整拍摄角度
- 调整拍摄距离
- 调整光线
- 观察评分变化

### 6. 确认拍摄
- 当评分满意时，点击"确认拍摄"
- 停止自动评估
- 显示最终评估结果

### 7. 保存结果
- 查看详细评估报告
- 点击"保存评估结果"
- 跳转到结果详情页

## 预期行为

### ✅ 正确行为
1. **自动采集**：每2秒自动拍照，无需用户操作
2. **实时评估**：每次拍照后立即显示评估结果
3. **实时建议**：根据评分提供改进建议
4. **计数更新**：评估次数持续增加
5. **评分更新**：评分随画面变化而变化

### ❌ 错误行为
1. 弹出选择框要求用户选择
2. 需要手动点击拍照按钮
3. 评估计数不增加
4. 没有显示建议
5. 评分不更新

## 常见问题排查

### 问题1：相机初始化失败
**现象**：显示"相机初始化失败"

**排查**：
1. 检查是否在真机上测试（不是开发者工具）
2. 检查是否授予了相机权限
3. 尝试重新进入页面

### 问题2：拍照失败
**现象**：显示"拍照失败，正在重试"

**排查**：
1. 检查相机权限
2. 检查手机相机是否被其他应用占用
3. 系统会自动重试3次

### 问题3：评估不更新
**现象**：评估计数不增加

**排查**：
1. 查看console日志
2. 检查是否显示"上一次评估还在进行中"
3. 检查网络连接（虽然是本地评估，但需要加载模块）

## Console日志参考

### 正常日志
```
📱 拍照助手页面
mode: preview
isEvaluating: false
evaluationCount: 0
📱 页面显示，初始化相机
=== 🎥 初始化相机 ===
CameraContext创建结果: [object Object]
✅ CameraContext已创建
=== 🚀 开始实时评估 ===
--- 📸 开始拍照评估 ---
✅ 拍照成功: http://tmp/...
✅ 评估完成 - 总分: 75
💡 实时建议: ['构图：可调整主体', '角度：可尝试其他角度', '画面良好，可以拍摄']
--- 📸 开始拍照评估 ---
✅ 拍照成功: http://tmp/...
✅ 评估完成 - 总分: 78
💡 实时建议: ['画面良好，可以拍摄']
```

### 异常日志
```
❌ CameraContext创建失败
❌ CameraContext不存在
❌ 拍照失败: [error details]
❌ 评估失败: [error details]
```

## 性能指标

### 正常性能
- 相机初始化：< 2秒
- 拍照间隔：2秒
- 单次评估：< 500ms
- 界面响应：流畅无卡顿

### 异常性能
- 相机初始化：> 5秒
- 拍照间隔：不规律
- 单次评估：> 2秒
- 界面响应：卡顿

## 测试检查清单

- [ ] 相机实时预览正常显示
- [ ] 点击"开始实时评估"后立即开始
- [ ] 评估计数每2秒增加1
- [ ] 实时建议正常显示
- [ ] 当前评分正常显示
- [ ] 各项得分正常显示
- [ ] 点击"确认拍摄"后停止评估
- [ ] 显示最终评估结果
- [ ] 可以保存评估结果
- [ ] 可以重新拍摄
- [ ] 可以返回首页

## 对比测试

### 与照片评估功能对比
| 功能 | 拍照助手 | 照片评估 |
|------|---------|---------|
| 实时预览 | ✅ 有 | ❌ 无 |
| 自动采集 | ✅ 每2秒 | ❌ 手动 |
| 实时建议 | ✅ 有 | ❌ 无 |
| 用户操作 | 只需开始/停止 | 需要选择照片 |
| 评估类型 | realtime | upload |

## 成功标准

### 必须满足
1. ✅ 每2秒自动拍照（无需用户操作）
2. ✅ 每次拍照后立即评估
3. ✅ 显示实时建议
4. ✅ 显示当前评分
5. ✅ 可以确认拍摄并保存

### 加分项
1. ✅ 界面流畅无卡顿
2. ✅ 评估速度快（< 500ms）
3. ✅ 建议准确有用
4. ✅ UI美观易用

## 总结

如果测试通过，应该看到：
- ✅ Camera组件显示实时预览
- ✅ 每2秒自动拍照评估
- ✅ 实时显示建议和评分
- ✅ 无需用户手动操作
- ✅ 可以根据建议调整拍摄

这才是真正的"实时评估拍摄画面"功能！
